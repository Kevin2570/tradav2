'use client';import { useState } from 'react';
type Message={id:string;text:string;authorId:string;createdAt:string};
export default function ThreadBox({threadId,initialMessages}:{threadId:string;initialMessages:Message[]}){const [messages,setMessages]=useState<Message[]>(initialMessages);const [text,setText]=useState('');const [authorId,setAuthorId]=useState('me');
async function send(){if(!text.trim())return;const res=await fetch('/api/thread',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({threadId,text,authorId})});const msg=await res.json();setMessages(m=>[...m,msg]);setText('');}
return (<div className="container" style={{padding:'24px 0'}}><h1 className="h2">Thread</h1><div className="card" style={{minHeight:200}}>{messages.map(m=>(<div key={m.id} style={{marginBottom:8}}><b>{m.authorId}:</b> {m.text}</div>))}</div><div style={{display:'flex',gap:8,marginTop:8}}><input value={authorId} onChange={e=>setAuthorId(e.target.value)} placeholder="your-id (for demo)" style={{padding:10,border:'1px solid #ddd',borderRadius:8}}/><input value={text} onChange={e=>setText(e.target.value)} style={{flex:1,padding:10,border:'1px solid #ddd',borderRadius:8}} placeholder="Type a message"/><button className="btn" onClick={send}>Send</button></div></div>)}
